(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{25:function(t,e,n){},28:function(t,e,n){},44:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),r=n(21),i=n.n(r),c=(n(44),n(4)),o=n(5),l=n(7),u=n(6),d=n(16),j=(n(28),n(9)),h="GET_ERRORS",p="SET_CURRENT_USER",b="POST_LOADING",O="GET_POSTS",m="ADD_POST",x="DELETE_POST",f=n(15),v=n.n(f),g=function(t){t?v.a.defaults.headers.common.Authorization=t:delete v.a.defaults.headers.common.Authorization},y=n(22),w=function(t){return{type:p,payload:t}},S=function(){return function(t){localStorage.removeItem("jwtToken"),g(!1),t(w({}))}},k=n(3),N=n(0),C=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={name:"",email:"",password:"",password2:"",errors:{}},t.onChange=function(e){t.setState(Object(d.a)({},e.target.name,e.target.value))},t.onSave=function(e){e.preventDefault(),console.log(t.state);var n={name:t.state.name,email:t.state.email,password:t.state.password,password2:t.state.password2};t.props.registerUser(n,t.props.history)},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(t){t.errors&&this.setState({errors:t.errors})}},{key:"render",value:function(){return Object(N.jsx)("div",{className:"message",children:Object(N.jsx)("div",{className:"signup",children:Object(N.jsx)("form",{noValidate:!0,onSubmit:this.onSave.bind(this),children:Object(N.jsx)("div",{children:Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:"Name"}),Object(N.jsx)("li",{children:Object(N.jsx)("input",{id:"Name",name:"name",type:"text",title:this.state.errors.name,value:this.state.name,onChange:this.onChange.bind(this)})}),Object(N.jsx)("li",{className:"warntext",children:this.state.errors.name}),Object(N.jsx)("li",{children:"Email-Id"}),Object(N.jsx)("li",{children:Object(N.jsx)("input",{id:"Email-Id",name:"email",type:"email",value:this.state.email,onChange:this.onChange.bind(this)})}),Object(N.jsx)("li",{className:"warntext",children:this.state.errors.email}),Object(N.jsx)("li",{children:"Password"}),Object(N.jsx)("li",{children:Object(N.jsx)("input",{id:"Password",name:"password",type:"password",value:this.state.password,onChange:this.onChange.bind(this)})}),Object(N.jsx)("li",{className:"warntext",children:this.state.errors.password}),Object(N.jsx)("li",{children:"Confirm Password"}),Object(N.jsx)("li",{children:Object(N.jsx)("input",{id:"Confirm Password",name:"password2",type:"password",value:this.state.password2,onChange:this.onChange.bind(this)})}),Object(N.jsx)("li",{className:"warntext",children:this.state.errors.password2}),Object(N.jsx)("li",{children:Object(N.jsx)("button",{className:"btn",children:"Submit"})})]})})})})})}}]),n}(s.Component),E=Object(j.b)((function(t){return{auth:t.auth,errors:t.errors}}),{registerUser:function(t,e){return function(n){v.a.post("/api/users/register",t).then((function(t){return e.push("/SignIn")})).catch((function(t){return n({type:h,payload:t.response.data})}))}}})(Object(k.f)(C)),P=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={email:"",password:"",errors:{}},t.onChange=function(e){t.setState(Object(d.a)({},e.target.name,e.target.value))},t.onSave=function(e){e.preventDefault();var n={email:t.state.email,password:t.state.password};t.props.loginUser(n)},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(t){t.auth.isAuthenticated&&this.props.history.push("/dashboard"),t.errors&&this.setState({errors:t.errors})}},{key:"render",value:function(){return Object(N.jsx)("div",{className:"message",children:Object(N.jsx)("div",{className:"signin",children:Object(N.jsx)("form",{noValidate:!0,onSubmit:this.onSave.bind(this),children:Object(N.jsx)("div",{children:Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:"Email-Id"}),Object(N.jsx)("li",{children:Object(N.jsx)("input",{id:"Email-Id",name:"email",type:"email",value:this.state.email,onChange:this.onChange.bind(this)})}),Object(N.jsx)("li",{className:"warntext",children:this.state.errors.email}),Object(N.jsx)("li",{children:"Password"}),Object(N.jsx)("li",{children:Object(N.jsx)("input",{id:"Password",name:"password",type:"password",value:this.state.password,onChange:this.onChange.bind(this)})}),Object(N.jsx)("li",{className:"warntext",children:this.state.errors.password}),Object(N.jsx)("li",{children:Object(N.jsx)("button",{className:"btn",children:"Submit"})})]})})})})})}}]),n}(s.Component),_=Object(j.b)((function(t){return{auth:t.auth,errors:t.errors}}),{loginUser:function(t){return function(e){v.a.post("/api/users/login",t).then((function(t){var n=t.data.token1;localStorage.setItem("jwtToken",n),g(n);var s=Object(y.a)(n);e(w(s))})).catch((function(t){e({type:h,payload:t.response.data})}))}}})(Object(k.f)(P)),D=n(17),T=(n(25),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"onLogoutClick",value:function(t){t.preventDefault(),this.props.logoutUser(),this.props.history.push("/Signin")}},{key:"render",value:function(){var t=this.props.auth,e=t.isAuthenticated,n=t.user,s=Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:Object(N.jsx)(D.b,{to:"/dashboard",children:Object(N.jsx)("span",{className:"links",children:"Post-Section!"})})}),Object(N.jsx)("li",{className:"linklogout",onClick:this.onLogoutClick.bind(this),children:"logout"}),Object(N.jsx)("li",{className:"avatar",children:Object(N.jsx)("div",{children:Object(N.jsx)("img",{src:n.avatar,alt:n.name,width:"100%",height:"100%"})})})]}),a=Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:Object(N.jsx)(D.b,{to:"/signup",children:Object(N.jsx)("span",{className:"links",children:"Sign-Up"})})}),Object(N.jsx)("li",{children:Object(N.jsx)(D.b,{to:"/signin",children:Object(N.jsx)("span",{className:"links",children:"Sign-In"})})})]});return Object(N.jsx)("div",{className:"navbar",children:!0===e?s:a})}}]),n}(s.Component)),I=Object(j.b)((function(t){return{auth:t.auth}}),{logoutUser:S})(Object(k.f)(T)),A=function(){return function(t){t(L()),v.a.get("/api/posts").then((function(e){return t({type:O,payload:e.data})})).catch((function(e){t({type:O,payload:null})}))}},L=function(){return{type:b}},R=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){s.setState(Object(d.a)({},t.target.name,t.target.value))},s.componentWillReceiveProps=function(t){t.errors&&s.setState({errors:t.errors})},s.onSubmit=function(t){t.preventDefault(),console.log(s.props);var e=s.props.auth.user;console.log("yeah,inside the onsumbit");var n={text:s.state.text,name:e.name,avatar:e.avatar};s.props.addPost(n),s.setState({text:"",errors:{}})},s.state={text:"",errors:{}},s}return Object(o.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"posttitle",children:Object(N.jsx)("form",{onSubmit:this.onSubmit.bind(this),children:Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{className:"headingtext",children:"Enter Your Post"}),Object(N.jsx)("li",{children:Object(N.jsx)("input",{name:"text",className:"inputbox",type:"textbox",value:this.state.text,onChange:this.onChange.bind(this)})}),Object(N.jsx)("li",{className:"warntext",children:this.state.errors.text}),Object(N.jsx)("li",{children:Object(N.jsx)("button",{className:"btn",type:"submit",children:"Submit"})})]})})})})}}]),n}(s.Component),U=Object(j.b)((function(t){return{auth:t.auth,errors:t.errors}}),{addPost:function(t){return function(e){v.a.post("/api/posts",t).then((function(t){return e({type:m,payload:t.data})})).catch((function(t){e({type:h,payload:t.response.data})}))}}})(Object(k.f)(R)),F=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"onDelete",value:function(t){console.log("in delete section"),this.props.deletePost(t)}},{key:"onLike",value:function(t){this.props.addLike(t)}},{key:"render",value:function(){var t=this.props,e=t.post,n=t.auth;return Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"post",children:[Object(N.jsxs)("div",{className:"upper",children:[Object(N.jsxs)("p",{className:"postusername",children:[Object(N.jsx)("img",{src:e.avatar,alt:""}),"\xa0",e.name]}),e.user===n.user.id?Object(N.jsx)("button",{type:"button",onClick:this.onDelete.bind(this,e._id),className:"delete",children:"\u274e"}):null]}),Object(N.jsx)("p",{className:"postcontent",children:e.text}),Object(N.jsxs)("div",{className:"likes",children:[Object(N.jsx)("button",{type:"button",onClick:this.onLike.bind(this,e._id),children:"\ud83d\udc4d"}),Object(N.jsx)("p",{className:"textlike",children:e.likes.length})]})]})})}}]),n}(s.Component),M=Object(j.b)((function(t){return{auth:t.auth}}),{deletePost:function(t){return function(e){e(L()),v.a.delete("/api/posts/".concat(t)).then((function(n){return e({type:x,payload:t})})).catch((function(t){e({type:h,payload:t.response.data})}))}},addLike:function(t){return function(e){e(L()),v.a.post("/api/posts/like/".concat(t)).then((function(t){return e(A())})).catch((function(t){e({type:h,payload:t.response.data})}))}}})(F),V=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return this.props.posts.map((function(t){return Object(N.jsx)(M,{post:t},t._id)}))}}]),n}(s.Component),X=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){var t,e=this.props.post,n=e.posts,s=e.loading;return t=null===n||s?"No posts till Date!":Object(N.jsx)(V,{posts:n}),Object(N.jsxs)("div",{children:[Object(N.jsx)(U,{}),t]})}}]),n}(s.Component),G=Object(j.b)((function(t){return{post:t.post}}),{getPosts:A})(X),W=n(19),z=n(38),B=n(8),J=function(t){return void 0===t||null===t||"object"===typeof t&&0===Object.keys(t).length||"string"===typeof t&&0===t.trim().length},Y={isAuthenticated:!1,user:{}};var q={};var H=n(39),K={posts:[],post:{},loading:!1};var Q=Object(W.b)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p:return Object(B.a)(Object(B.a)({},t),{},{isAuthenticated:!J(e.payload),user:e.payload});default:return t}},errors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return e.payload;default:return t}},post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return Object(B.a)(Object(B.a)({},t),{},{loading:!0});case O:return Object(B.a)(Object(B.a)({},t),{},{posts:e.payload,loading:!1});case m:return Object(B.a)(Object(B.a)({},t),{},{posts:[e.payload].concat(Object(H.a)(t.posts)),loading:!1});case x:return Object(B.a)(Object(B.a)({},t),{},{posts:t.posts.filter((function(t){return t._id!==e.payload})),loading:!1});default:return t}}}),Z=[z.a],$=Object(W.d)(Q,{},Object(W.c)(W.a.apply(void 0,Z),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));if(localStorage.jwtToken){g(localStorage.jwtToken);var tt=Object(y.a)(localStorage.jwtToken);$.dispatch(w(tt));var et=Date.now()/1e3;tt.exp<et&&($.dispatch(S()),window.location.href="/Signin")}var nt=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(N.jsx)(j.a,{store:$,children:Object(N.jsx)("div",{className:"app",children:Object(N.jsxs)(D.a,{children:[Object(N.jsx)("div",{className:"navbardiv",children:Object(N.jsx)(k.a,{path:"/",component:I})}),Object(N.jsxs)("div",{className:"restpagestdiv",children:[Object(N.jsx)(k.c,{children:Object(N.jsx)(k.a,{exact:!0,path:"/dashboard",component:G})}),Object(N.jsx)(k.c,{children:Object(N.jsx)(k.a,{exact:!0,path:"/Signup",component:E})}),Object(N.jsx)(k.c,{children:Object(N.jsx)(k.a,{exact:!0,path:"/SignIn",component:_})})]})]})})})}}]),n}(s.Component),st=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),s(t),a(t),r(t),i(t)}))};i.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(nt,{})}),document.getElementById("root")),st()}},[[73,1,2]]]);
//# sourceMappingURL=main.707ceb70.chunk.js.map